require("dotenv").config("../.env");
const { Signer } = require("ethers");
const { ethers } = require("hardhat");

const contractProver = "0x9A676e781A523b5d0C0e43731313A708CB607508";

const proof = [
  '0xf90211a04807c879eeac72ebca438dbbd9fa79ec149c806130b872077c47a1be240c7a0ca005ce5ec6d8590c88d4d6718bbc2b905faa96d9563c69a6354b0bcf59d3498efba0eda7cddff4050af77e06c6351b08a3f2ceac921b8b7a3c9220406e21ec3b02e0a06351708f6e35cdddf624fb5824b9ced0e73460e14686625301a4d20b4158cc57a00a4ad8a67a8dbc547c235f8fc022581ed78c4f892850b61c4b69b8c8b11f9eb4a0f8cd5dd277256eed2151ac1aa6dab8342cce0fd8d99c9deb1a042224227f0642a033da877577c13886bcecd00a45c37429e6049345f02f75c897c1ec7cd00a80a2a004e8f54c708846da55a5cf59af6d60b251e2a7719cb82adb9df1ed042117a9d6a08e84fa8fab0ac771cf8a4ab4fd6a1b066d0360bfb6405a8443fb73391a8aa550a027818c7b04babc5a30e79b163469416b7f9b4471714b7e4216b7ac055284bc7fa0e543cbfe7a3e616da0500835c143d790f28e34f79610948d445c772009e0b77ba0ba0da47eaace29f28b7eab6778580829e36d5e1ebb3098d6daa87448382baa3ba0a40ae8f382c69d707dffca79f9745a19264aeabd1281492b68a39980f88f2bdba03aa065805e9bdab40a687dcd7e0008178faa4c8b73a6b7ffc52bfead13c4a0a9a00a88b2325ad173c94e73ca47772e94a5132cc2bf1b3dcca899aa5f9c78a966d9a0fa04d83b4ee5da85c96d573fc36951fc31910e51fb7cdff297b333ee27f9036d80',
  '0xf90211a0d7d65172f0d2bb7fdea9d1475e8c6db76fbc7057b7f7f87410702dfc89f5cbada0af79a974aae66d2fb7568f239c996b3f863ba58ef6682c2317f0282882155009a006004b7c1419354b7c89eb085ff0bc057d3d35e1668f9249785b3e27d0166828a08f0f13ecf8f3f33493f711aff439ec795eff3633f3b1e0e451ca6578cc8c0478a0d1ac7aac5f357496a615db4cf8184ec546a574df7710a11e8c37ea6a04ace8d7a009331dab409d0535da9fbff4c3f0e6d4d54829b32365e7b137f8d7931a5aa373a0863f3a028e8ed2034dfeca3b99f12be99612382c8f0884ddd74b2f97cd226368a0dcda9cf31c79540f3663c5fa90d926e65e41a4f114adfc87cf14e078bed9e2efa0b44897380c953879824febd6110b61dd84bd76c57a72db941090add25ac1e3e6a05d0e03ada4b43027f3f0e692b26bb5dc0c332ea82e557a9a67665d153a939c39a08b2b84bf8ae66a7eb0302c23f08baab64f372dc92a3d62daf4b7ea75e87dbf14a0cbc9b1a0eddfd980ddbefb3ca17ae93d5c5f07889d589762c1313a52ac7ac94da010448c873fcf902ba48963c811ce1921b0e3e3a8489995b3acc812577af3a67fa01b4cfe2503d73fcd827aba6a258d01c7f12a4176d37c3fe3fe533c778c6afd15a0411cdfec3759eacb504b8fba1f309b6f812997f6fa7ecd2fc30713d5fc71bc6ea05c7c4df4bd0cf588f493f3319a0dcbcd185b3a0fea8f41cbe4145727add32cc580',
  '0xf90211a04d3880f5c9fb66b342ea80ffb1ad105b63c6859210856f6a1a10c91914b64cc3a053d58e72196cd5a5af404279ae1c0797a8acc372bb17f04cd94f1bc9de496e82a0b6a4287e474d8a3cb4efa8728f2cafbf17a492fc499f1d5a2fef0f4afc0cb6eca06b91725b0ea6947fe143eba8bc0797563b11c288fbb24ba04733e91505b9d776a0d75163ddf292c7bb35fefaf8fc3eb9359856404ad58b91ab9acef2e2ba4363bba0441e76103f576d70c730c1a2085a324d12d0a0c4d2d484f364ea01cf80f385cda07412a815a33a85196b9bf91ee5a3364257bbd6d8f3bccbdd0c10206291210c97a05714d6e29322c92c1308f7d69265e8c4dd8a30ec6cd178f8f0aec4ab09381f12a0294f6febac79bd82725c11d894e00e6398d5d848c50b6ab5b47f5946930c952fa09690d5aeea8496bc35009d7c8b23853c6ac63639b64139c59a1ac13301709640a07a4ae3602945275611bae56892d531ba62bb1856340cc01a4a99ebcfaceeb0d9a001189a1c7296b9d336a9209dec7d9d2b3251e93ef4424a372be94cf04ea39ab0a05a5cf4d9afdc892d2b068d911abc2ae9c2594849efc50f8fd06486fc3978da36a0e98c5530ee11e78009952e01dd32c7f356f1f7713f3b08f7e5dcd65ca3427a0fa023339d2d6c97e3f8dd812f0f2686a794df12ec51c43f1edb8c2546f3fe22e299a07040efad9c8a3eb7bfbaec472a834d4a4ea11ebb407531a8bcc8f79d16a41ee380',
  '0xf90111a0221a946d44e4c1cfbb848a4578ffcc735db3b74ac9610634d36d05086d684e23a00b7b43097d219940eaab450f3b686d0f6acb59a9724626a12dce1e03f19395208080a0728b981af270d0bf7d1429b8ea14978495e94200884beea4e212aa9a1e4c88eca04e42b4108e699dbd846c8488d980117e8374532b16b49b659e1e588a356712f7a0664ddcdfdbf591a02f528c2d6a70c47942c66f111c5603fdca5349dafbf61466a0fe92024f2e6df7c7f87d9d81431274c414f650d08a4e485389643461ba1177ae80a0433e669be889fdd25a5194dafeb3fd9d80ee3b52dd5250b9327b7fb64f9c22048080808080a0f5ddd8317c57fdc6030a8692222509b877cf93508b61beeb2065306c6a0fa9d480',
  '0xe215a0567bf9790a621a2e27abd75ca85e6599a1dc127d06313a37727bc565aa2ba59d',
  '0xf8518080808080808080808080a00ac530edf3e45bbecca259ab8339f34f0c3ccf6e6eba00e404549135aa8c81698080a02e1cfce9ecb176745dbddefadea9548c788073a65eec4694b890cb2a3bf7e32d8080',
  '0xf59e2058ba1281c1e3aefd86a7876c9cf7d40d3893ae3ee02948a84300a8996595947217bc604476859303a27f111b187526231a300c'
]

//const proof_blob = "0xf907fcf90211a04807c879eeac72ebca438dbbd9fa79ec149c806130b872077c47a1be240c7a0ca005ce5ec6d8590c88d4d6718bbc2b905faa96d9563c69a6354b0bcf59d3498efba0eda7cddff4050af77e06c6351b08a3f2ceac921b8b7a3c9220406e21ec3b02e0a06351708f6e35cdddf624fb5824b9ced0e73460e14686625301a4d20b4158cc57a00a4ad8a67a8dbc547c235f8fc022581ed78c4f892850b61c4b69b8c8b11f9eb4a0f8cd5dd277256eed2151ac1aa6dab8342cce0fd8d99c9deb1a042224227f0642a033da877577c13886bcecd00a45c37429e6049345f02f75c897c1ec7cd00a80a2a004e8f54c708846da55a5cf59af6d60b251e2a7719cb82adb9df1ed042117a9d6a08e84fa8fab0ac771cf8a4ab4fd6a1b066d0360bfb6405a8443fb73391a8aa550a027818c7b04babc5a30e79b163469416b7f9b4471714b7e4216b7ac055284bc7fa0e543cbfe7a3e616da0500835c143d790f28e34f79610948d445c772009e0b77ba0ba0da47eaace29f28b7eab6778580829e36d5e1ebb3098d6daa87448382baa3ba0a40ae8f382c69d707dffca79f9745a19264aeabd1281492b68a39980f88f2bdba03aa065805e9bdab40a687dcd7e0008178faa4c8b73a6b7ffc52bfead13c4a0a9a00a88b2325ad173c94e73ca47772e94a5132cc2bf1b3dcca899aa5f9c78a966d9a0fa04d83b4ee5da85c96d573fc36951fc31910e51fb7cdff297b333ee27f9036d80f90211a0d7d65172f0d2bb7fdea9d1475e8c6db76fbc7057b7f7f87410702dfc89f5cbada0af79a974aae66d2fb7568f239c996b3f863ba58ef6682c2317f0282882155009a006004b7c1419354b7c89eb085ff0bc057d3d35e1668f9249785b3e27d0166828a08f0f13ecf8f3f33493f711aff439ec795eff3633f3b1e0e451ca6578cc8c0478a0d1ac7aac5f357496a615db4cf8184ec546a574df7710a11e8c37ea6a04ace8d7a009331dab409d0535da9fbff4c3f0e6d4d54829b32365e7b137f8d7931a5aa373a0863f3a028e8ed2034dfeca3b99f12be99612382c8f0884ddd74b2f97cd226368a0dcda9cf31c79540f3663c5fa90d926e65e41a4f114adfc87cf14e078bed9e2efa0b44897380c953879824febd6110b61dd84bd76c57a72db941090add25ac1e3e6a05d0e03ada4b43027f3f0e692b26bb5dc0c332ea82e557a9a67665d153a939c39a08b2b84bf8ae66a7eb0302c23f08baab64f372dc92a3d62daf4b7ea75e87dbf14a0cbc9b1a0eddfd980ddbefb3ca17ae93d5c5f07889d589762c1313a52ac7ac94da010448c873fcf902ba48963c811ce1921b0e3e3a8489995b3acc812577af3a67fa01b4cfe2503d73fcd827aba6a258d01c7f12a4176d37c3fe3fe533c778c6afd15a0411cdfec3759eacb504b8fba1f309b6f812997f6fa7ecd2fc30713d5fc71bc6ea05c7c4df4bd0cf588f493f3319a0dcbcd185b3a0fea8f41cbe4145727add32cc580f90211a04d3880f5c9fb66b342ea80ffb1ad105b63c6859210856f6a1a10c91914b64cc3a053d58e72196cd5a5af404279ae1c0797a8acc372bb17f04cd94f1bc9de496e82a0b6a4287e474d8a3cb4efa8728f2cafbf17a492fc499f1d5a2fef0f4afc0cb6eca06b91725b0ea6947fe143eba8bc0797563b11c288fbb24ba04733e91505b9d776a0d75163ddf292c7bb35fefaf8fc3eb9359856404ad58b91ab9acef2e2ba4363bba0441e76103f576d70c730c1a2085a324d12d0a0c4d2d484f364ea01cf80f385cda07412a815a33a85196b9bf91ee5a3364257bbd6d8f3bccbdd0c10206291210c97a05714d6e29322c92c1308f7d69265e8c4dd8a30ec6cd178f8f0aec4ab09381f12a0294f6febac79bd82725c11d894e00e6398d5d848c50b6ab5b47f5946930c952fa09690d5aeea8496bc35009d7c8b23853c6ac63639b64139c59a1ac13301709640a07a4ae3602945275611bae56892d531ba62bb1856340cc01a4a99ebcfaceeb0d9a001189a1c7296b9d336a9209dec7d9d2b3251e93ef4424a372be94cf04ea39ab0a05a5cf4d9afdc892d2b068d911abc2ae9c2594849efc50f8fd06486fc3978da36a0e98c5530ee11e78009952e01dd32c7f356f1f7713f3b08f7e5dcd65ca3427a0fa023339d2d6c97e3f8dd812f0f2686a794df12ec51c43f1edb8c2546f3fe22e299a07040efad9c8a3eb7bfbaec472a834d4a4ea11ebb407531a8bcc8f79d16a41ee380f90111a0221a946d44e4c1cfbb848a4578ffcc735db3b74ac9610634d36d05086d684e23a00b7b43097d219940eaab450f3b686d0f6acb59a9724626a12dce1e03f19395208080a0728b981af270d0bf7d1429b8ea14978495e94200884beea4e212aa9a1e4c88eca04e42b4108e699dbd846c8488d980117e8374532b16b49b659e1e588a356712f7a0664ddcdfdbf591a02f528c2d6a70c47942c66f111c5603fdca5349dafbf61466a0fe92024f2e6df7c7f87d9d81431274c414f650d08a4e485389643461ba1177ae80a0433e669be889fdd25a5194dafeb3fd9d80ee3b52dd5250b9327b7fb64f9c22048080808080a0f5ddd8317c57fdc6030a8692222509b877cf93508b61beeb2065306c6a0fa9d480e215a0567bf9790a621a2e27abd75ca85e6599a1dc127d06313a37727bc565aa2ba59df8518080808080808080808080a00ac530edf3e45bbecca259ab8339f34f0c3ccf6e6eba00e404549135aa8c81698080a02e1cfce9ecb176745dbddefadea9548c788073a65eec4694b890cb2a3bf7e32d8080f59e2058ba1281c1e3aefd86a7876c9cf7d40d3893ae3ee02948a84300a8996595947217bc604476859303a27f111b187526231a300c";

const slot = "0x9d61c86e541e270abd156f02bcbe90d159483fae781fffe26048ffc889cf69ff";
const slotKey = "0x0f0d0901050b05080b0a010208010c010e030a0e0f0d08060a070807060c090c0f070d04000d030809030a0e030e0e00020904080a08040300000a0809090605";

const storageHash = "0x8d50072b9535f3e3c0f1a5f8e563de92109d448d19ebce7bd34d494f088c1857";
async function main() {

  const storageProof = {
    expectedRoot: storageHash,
    key: slotKey, //'0x' + expandkey(web3.utils.soliditySha3(kkkey)),
    proof: proof,
    keyIndex: 0,
    proofIndex: 0,
    expectedValue: "0x7217bc604476859303a27f111b187526231a300c",
  }

  const Prover = await ethers.getContractFactory("Prover");
  const prover = Prover.attach(contractProver);

  const result = await prover.verifyStorage(
    storageProof
  );

  console.log(result);
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });

